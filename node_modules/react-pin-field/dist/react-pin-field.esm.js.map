{"version":3,"file":"react-pin-field.esm.js","sources":["../src/index.ts"],"sourcesContent":["import {FC, createElement, forwardRef, useEffect, useImperativeHandle, useRef} from \"react\";\n\nimport {PinField} from \"@soywod/pin-field\";\nimport {\n  ReactPinFieldProps as Props,\n  ReactPinFieldDefaultProps as DefaultProps,\n  ReactPinFieldInputProps as InputProps,\n} from \"./index.types\";\n\nexport * from \"@soywod/pin-field\";\nexport * from \"./index.types\";\n\nfunction noop() {\n  //\n}\n\nconst defaultProps: DefaultProps = {\n  ref: {current: new PinField()},\n  length: 5,\n  validate: /^[a-zA-Z0-9]$/,\n  format: key => key,\n  onResolveKey: noop,\n  onRejectKey: noop,\n  onChange: noop,\n  onComplete: noop,\n};\n\nexport const ReactPinField: FC<Props> = forwardRef((customProps, fwdRef) => {\n  const ref = useRef<PinField>(new PinField());\n  const props: DefaultProps & InputProps = {...defaultProps, ...customProps};\n  const {\n    className,\n    ref: _ref,\n    length,\n    validate,\n    format,\n    onResolveKey,\n    onRejectKey,\n    onChange,\n    onComplete,\n    ...inputProps\n  } = props;\n\n  function handleChange(evt: Event) {\n    if (evt instanceof CustomEvent) {\n      onChange(evt.detail.value);\n    }\n  }\n\n  function handleResolveKey(evt: Event) {\n    if (evt instanceof CustomEvent) {\n      onResolveKey(evt.detail.key);\n    }\n  }\n\n  function handleRejectKey(evt: Event) {\n    if (evt instanceof CustomEvent) {\n      onRejectKey(evt.detail.key);\n    }\n  }\n\n  function handleComplete(evt: Event) {\n    if (evt instanceof CustomEvent) {\n      onComplete(evt.detail.value);\n    }\n  }\n\n  useImperativeHandle(fwdRef, () => ref.current, [ref]);\n\n  useEffect(() => {\n    if (ref.current) {\n      ref.current.validate = validate;\n      ref.current.format = format;\n      ref.current.addEventListener(\"change\", handleChange);\n      ref.current.addEventListener(\"resolve-key\", handleResolveKey);\n      ref.current.addEventListener(\"reject-key\", handleRejectKey);\n      ref.current.addEventListener(\"complete\", handleComplete);\n\n      return () => {\n        ref.current.removeEventListener(\"change\", handleChange);\n        ref.current.removeEventListener(\"resolve-key\", handleResolveKey);\n        ref.current.removeEventListener(\"reject-key\", handleRejectKey);\n        ref.current.removeEventListener(\"complete\", handleComplete);\n      };\n    }\n    return;\n  }, []);\n\n  return createElement(\"swd-pin-field\", {ref, class: className, length, ...inputProps});\n});\n\nexport default ReactPinField;\n"],"names":["noop","defaultProps","ref","current","PinField","length","validate","format","key","onResolveKey","onRejectKey","onChange","onComplete","ReactPinField","forwardRef","customProps","fwdRef","useRef","props","className","inputProps","handleChange","evt","CustomEvent","detail","value","handleResolveKey","handleRejectKey","handleComplete","useImperativeHandle","useEffect","addEventListener","removeEventListener","createElement"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAYA,SAASA,IAAT;AAEC;;AAED,IAAMC,YAAY,GAAiB;AACjCC,EAAAA,GAAG,EAAE;AAACC,IAAAA,OAAO,eAAE,IAAIC,QAAJ;AAAV,GAD4B;AAEjCC,EAAAA,MAAM,EAAE,CAFyB;AAGjCC,EAAAA,QAAQ,EAAE,eAHuB;AAIjCC,EAAAA,MAAM,EAAE,gBAAAC,GAAG;AAAA,WAAIA,GAAJ;AAAA,GAJsB;AAKjCC,EAAAA,YAAY,EAAET,IALmB;AAMjCU,EAAAA,WAAW,EAAEV,IANoB;AAOjCW,EAAAA,QAAQ,EAAEX,IAPuB;AAQjCY,EAAAA,UAAU,EAAEZ;AARqB,CAAnC;IAWaa,aAAa,gBAAcC,UAAU,CAAC,UAACC,WAAD,EAAcC,MAAd;AACjD,MAAMd,GAAG,GAAGe,MAAM,CAAW,IAAIb,QAAJ,EAAX,CAAlB;;AACA,MAAMc,KAAK,gBAAkCjB,YAAlC,EAAmDc,WAAnD,CAAX;;AACA,MACEI,SADF,GAWID,KAXJ,CACEC,SADF;AAAA,MAGEd,MAHF,GAWIa,KAXJ,CAGEb,MAHF;AAAA,MAIEC,QAJF,GAWIY,KAXJ,CAIEZ,QAJF;AAAA,MAKEC,MALF,GAWIW,KAXJ,CAKEX,MALF;AAAA,MAMEE,YANF,GAWIS,KAXJ,CAMET,YANF;AAAA,MAOEC,WAPF,GAWIQ,KAXJ,CAOER,WAPF;AAAA,MAQEC,QARF,GAWIO,KAXJ,CAQEP,QARF;AAAA,MASEC,UATF,GAWIM,KAXJ,CASEN,UATF;AAAA,MAUKQ,UAVL,iCAWIF,KAXJ;;AAaA,WAASG,YAAT,CAAsBC,GAAtB;AACE,QAAIA,GAAG,YAAYC,WAAnB,EAAgC;AAC9BZ,MAAAA,QAAQ,CAACW,GAAG,CAACE,MAAJ,CAAWC,KAAZ,CAAR;AACD;AACF;;AAED,WAASC,gBAAT,CAA0BJ,GAA1B;AACE,QAAIA,GAAG,YAAYC,WAAnB,EAAgC;AAC9Bd,MAAAA,YAAY,CAACa,GAAG,CAACE,MAAJ,CAAWhB,GAAZ,CAAZ;AACD;AACF;;AAED,WAASmB,eAAT,CAAyBL,GAAzB;AACE,QAAIA,GAAG,YAAYC,WAAnB,EAAgC;AAC9Bb,MAAAA,WAAW,CAACY,GAAG,CAACE,MAAJ,CAAWhB,GAAZ,CAAX;AACD;AACF;;AAED,WAASoB,cAAT,CAAwBN,GAAxB;AACE,QAAIA,GAAG,YAAYC,WAAnB,EAAgC;AAC9BX,MAAAA,UAAU,CAACU,GAAG,CAACE,MAAJ,CAAWC,KAAZ,CAAV;AACD;AACF;;AAEDI,EAAAA,mBAAmB,CAACb,MAAD,EAAS;AAAA,WAAMd,GAAG,CAACC,OAAV;AAAA,GAAT,EAA4B,CAACD,GAAD,CAA5B,CAAnB;AAEA4B,EAAAA,SAAS,CAAC;AACR,QAAI5B,GAAG,CAACC,OAAR,EAAiB;AACfD,MAAAA,GAAG,CAACC,OAAJ,CAAYG,QAAZ,GAAuBA,QAAvB;AACAJ,MAAAA,GAAG,CAACC,OAAJ,CAAYI,MAAZ,GAAqBA,MAArB;AACAL,MAAAA,GAAG,CAACC,OAAJ,CAAY4B,gBAAZ,CAA6B,QAA7B,EAAuCV,YAAvC;AACAnB,MAAAA,GAAG,CAACC,OAAJ,CAAY4B,gBAAZ,CAA6B,aAA7B,EAA4CL,gBAA5C;AACAxB,MAAAA,GAAG,CAACC,OAAJ,CAAY4B,gBAAZ,CAA6B,YAA7B,EAA2CJ,eAA3C;AACAzB,MAAAA,GAAG,CAACC,OAAJ,CAAY4B,gBAAZ,CAA6B,UAA7B,EAAyCH,cAAzC;AAEA,aAAO;AACL1B,QAAAA,GAAG,CAACC,OAAJ,CAAY6B,mBAAZ,CAAgC,QAAhC,EAA0CX,YAA1C;AACAnB,QAAAA,GAAG,CAACC,OAAJ,CAAY6B,mBAAZ,CAAgC,aAAhC,EAA+CN,gBAA/C;AACAxB,QAAAA,GAAG,CAACC,OAAJ,CAAY6B,mBAAZ,CAAgC,YAAhC,EAA8CL,eAA9C;AACAzB,QAAAA,GAAG,CAACC,OAAJ,CAAY6B,mBAAZ,CAAgC,UAAhC,EAA4CJ,cAA5C;AACD,OALD;AAMD;;AACD;AACD,GAjBQ,EAiBN,EAjBM,CAAT;AAmBA,SAAOK,aAAa,CAAC,eAAD;AAAmB/B,IAAAA,GAAG,EAAHA,GAAnB;AAAwB,aAAOiB,SAA/B;AAA0Cd,IAAAA,MAAM,EAANA;AAA1C,KAAqDe,UAArD,EAApB;AACD,CA9DiD;;;;;"}