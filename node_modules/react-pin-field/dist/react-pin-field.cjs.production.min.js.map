{"version":3,"file":"react-pin-field.cjs.production.min.js","sources":["../src/index.ts"],"sourcesContent":["import {FC, createElement, forwardRef, useEffect, useImperativeHandle, useRef} from \"react\";\n\nimport {PinField} from \"@soywod/pin-field\";\nimport {\n  ReactPinFieldProps as Props,\n  ReactPinFieldDefaultProps as DefaultProps,\n  ReactPinFieldInputProps as InputProps,\n} from \"./index.types\";\n\nexport * from \"@soywod/pin-field\";\nexport * from \"./index.types\";\n\nfunction noop() {\n  //\n}\n\nconst defaultProps: DefaultProps = {\n  ref: {current: new PinField()},\n  length: 5,\n  validate: /^[a-zA-Z0-9]$/,\n  format: key => key,\n  onResolveKey: noop,\n  onRejectKey: noop,\n  onChange: noop,\n  onComplete: noop,\n};\n\nexport const ReactPinField: FC<Props> = forwardRef((customProps, fwdRef) => {\n  const ref = useRef<PinField>(new PinField());\n  const props: DefaultProps & InputProps = {...defaultProps, ...customProps};\n  const {\n    className,\n    ref: _ref,\n    length,\n    validate,\n    format,\n    onResolveKey,\n    onRejectKey,\n    onChange,\n    onComplete,\n    ...inputProps\n  } = props;\n\n  function handleChange(evt: Event) {\n    if (evt instanceof CustomEvent) {\n      onChange(evt.detail.value);\n    }\n  }\n\n  function handleResolveKey(evt: Event) {\n    if (evt instanceof CustomEvent) {\n      onResolveKey(evt.detail.key);\n    }\n  }\n\n  function handleRejectKey(evt: Event) {\n    if (evt instanceof CustomEvent) {\n      onRejectKey(evt.detail.key);\n    }\n  }\n\n  function handleComplete(evt: Event) {\n    if (evt instanceof CustomEvent) {\n      onComplete(evt.detail.value);\n    }\n  }\n\n  useImperativeHandle(fwdRef, () => ref.current, [ref]);\n\n  useEffect(() => {\n    if (ref.current) {\n      ref.current.validate = validate;\n      ref.current.format = format;\n      ref.current.addEventListener(\"change\", handleChange);\n      ref.current.addEventListener(\"resolve-key\", handleResolveKey);\n      ref.current.addEventListener(\"reject-key\", handleRejectKey);\n      ref.current.addEventListener(\"complete\", handleComplete);\n\n      return () => {\n        ref.current.removeEventListener(\"change\", handleChange);\n        ref.current.removeEventListener(\"resolve-key\", handleResolveKey);\n        ref.current.removeEventListener(\"reject-key\", handleRejectKey);\n        ref.current.removeEventListener(\"complete\", handleComplete);\n      };\n    }\n    return;\n  }, []);\n\n  return createElement(\"swd-pin-field\", {ref, class: className, length, ...inputProps});\n});\n\nexport default ReactPinField;\n"],"names":["noop","defaultProps","ref","current","PinField","length","validate","format","key","onResolveKey","onRejectKey","onChange","onComplete","ReactPinField","forwardRef","customProps","fwdRef","useRef","props","className","inputProps","handleChange","evt","CustomEvent","detail","value","handleResolveKey","handleRejectKey","handleComplete","useImperativeHandle","useEffect","addEventListener","removeEventListener","createElement"],"mappings":"yUAYA,SAASA,KAIT,IAAMC,EAA6B,CACjCC,IAAK,CAACC,QAAS,IAAIC,YACnBC,OAAQ,EACRC,SAAU,gBACVC,OAAQ,SAAAC,UAAOA,GACfC,aAAcT,EACdU,YAAaV,EACbW,SAAUX,EACVY,WAAYZ,GAGDa,EAA2BC,cAAW,SAACC,EAAaC,OACzDd,EAAMe,SAAiB,IAAIb,YAC3Bc,OAAuCjB,EAAiBc,GAE5DI,EAUED,EAVFC,UAEAd,EAQEa,EARFb,OACAC,EAOEY,EAPFZ,SACAC,EAMEW,EANFX,OACAE,EAKES,EALFT,aACAC,EAIEQ,EAJFR,YACAC,EAGEO,EAHFP,SACAC,EAEEM,EAFFN,WACGQ,qIACDF,kHAEKG,EAAaC,GAChBA,aAAeC,aACjBZ,EAASW,EAAIE,OAAOC,gBAIfC,EAAiBJ,GACpBA,aAAeC,aACjBd,EAAaa,EAAIE,OAAOhB,cAInBmB,EAAgBL,GACnBA,aAAeC,aACjBb,EAAYY,EAAIE,OAAOhB,cAIlBoB,EAAeN,GAClBA,aAAeC,aACjBX,EAAWU,EAAIE,OAAOC,cAI1BI,sBAAoBb,GAAQ,kBAAMd,EAAIC,UAAS,CAACD,IAEhD4B,aAAU,cACJ5B,EAAIC,eACND,EAAIC,QAAQG,SAAWA,EACvBJ,EAAIC,QAAQI,OAASA,EACrBL,EAAIC,QAAQ4B,iBAAiB,SAAUV,GACvCnB,EAAIC,QAAQ4B,iBAAiB,cAAeL,GAC5CxB,EAAIC,QAAQ4B,iBAAiB,aAAcJ,GAC3CzB,EAAIC,QAAQ4B,iBAAiB,WAAYH,GAElC,WACL1B,EAAIC,QAAQ6B,oBAAoB,SAAUX,GAC1CnB,EAAIC,QAAQ6B,oBAAoB,cAAeN,GAC/CxB,EAAIC,QAAQ6B,oBAAoB,aAAcL,GAC9CzB,EAAIC,QAAQ6B,oBAAoB,WAAYJ,MAI/C,IAEIK,gBAAc,mBAAkB/B,IAAAA,QAAYiB,EAAWd,OAAAA,GAAWe"}